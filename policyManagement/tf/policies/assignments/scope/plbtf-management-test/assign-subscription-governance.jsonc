{
  // Azure Policy Assignment: Subscription Governance Initiative
  // Purpose: Assign the subscription governance initiative to enforce naming conventions
  // Scope: Management Test Management Group

  // Unique identifier for this assignment (max 24 chars)
  "name": "assign-sub-governance",

  "properties": {
    // Human-readable name displayed in Azure Portal
    "displayName": "Assign Subscription Governance Initiative",

    // Detailed description of what this assignment does
    "description": "Assigns the subscription governance initiative to the management-test management group to enforce subscription naming conventions and compliance requirements.",

    // Metadata for assignment classification
    "metadata": {
      "assignedBy": "Terraform",
      "category": "Governance",
      "version": "1.0.0"
    },

    // Reference to the policy set definition (initiative) to assign
    "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/plbtf-management-test/providers/Microsoft.Authorization/policySetDefinitions/subscription-governance-initiative",

    // Enforcement mode: Default (enforce), DoNotEnforce (audit only)
    "enforcementMode": "Default",

    // Parameter values for the initiative
    "parameters": {
      "namingConventionEffect": {
        "value": "Audit"
      },
      "subscriptionNamePattern": {
        "value": "^plbtf-[a-z0-9]+-sc-(dev|test|nonprod|prod)-[0-9]{3}$"
      }
    },

    // Non-compliance messages shown when resources violate the policy
    "nonComplianceMessages": [
      {
        "message": "Subscription name must follow the naming convention: plbtf-[workload]-sc-[environment]-[number]"
      }
    ]
  }
}
